function Unison(n){var i=0,s=[],c={},r={},t={};function e(n,e){if(!e)throw Error("a function definition is required");c[n]=e}function o(){return window.opener||(window.parent===window?null:window.parent)}function a(){return n||o()||window}return e("set",function(n,e){t[n]=e}),e("get",function(n){return void 0===t[n]?null:t[n]}),window.addEventListener("message",function(n){if(n.data&&n.data.__unison){var e=n.data.__unison;if("call"===e[0]){var i=e[1],r=e[2],t=e[3],o=c[r].apply(null,t);n.source.postMessage({__unison:["callback",i,o]},"*")}else if("callback"===e[0])for(var i=e[1],o=e[2],a=0;a<s.length;++a){var u=s[a];if(u.uid===i){s.splice(a,1),u.resolve(o);break}}}}),{declare:function(n){function e(){var e=i++;return a().postMessage({__unison:["call",e,n,Array.from(arguments)]},"*"),new Promise(function(n){s.push({uid:e,resolve:n})})}return r[n]=e},define:e,getWindowParent:o,hasWindowParent:function(){return!!o()},getActingParent:a}}